<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Enhanced Oxygen Atom AR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (your existing styles remain unchanged) ... */
    </style>
</head>
<body>
    <div class="container">
        <!-- ... (your existing overlay and controls remain unchanged) ... -->
        
        <div class="ar-container" id="arContainer">
            <a-scene embedded arjs="sourceType: webcam; detectionMode: mono; maxDetectionRate: 60; debugUIEnabled: false;">
                <a-marker type="pattern" preset="hiro">
                    <!-- Entire atom model for scaling -->
                    <a-entity id="atom-model" scale="1 1 1">
                        <!-- Nucleus - single large sphere -->
                        <a-entity id="nucleus" position="0 0.5 0">
                            <a-sphere color="#FF3B30" radius="0.5" position="0 0 0">
                                <a-text value="8p⁺" color="white" align="center" position="0 0 0.51" scale="0.4 0.4 0.4"></a-text>
                            </a-sphere>
                            <a-sphere color="#FF9500" radius="0.5" position="0.2 0.15 0.15">
                                <a-text value="8n⁰" color="white" align="center" position="0 0 0.51" scale="0.4 0.4 0.4"></a-text>
                            </a-sphere>
                        </a-entity>
                        
                        <!-- Orbit lines (horizontal orientation) -->
                        <a-ring id="orbit1" color="#00ffaa" radius-inner="0.8" radius-outer="0.82" position="0 0.5 0" rotation="90 0 0" opacity="0.5"></a-ring>
                        <a-ring id="orbit2" color="#00ffaa" radius-inner="1.4" radius-outer="1.42" position="0 0.5 0" rotation="90 0 0" opacity="0.5"></a-ring>
                        <a-ring id="orbit3" color="#d66efd" radius-inner="2.0" radius-outer="2.02" position="0 0.5 0" rotation="90 0 0" opacity="0.5"></a-ring>
                        
                        <!-- Inner Orbit (2 electrons) - 1s² -->
                        <a-entity id="inner-orbit" position="0 0.5 0">
                            <a-animation attribute="rotation"
                                from="0 0 0"
                                to="0 360 0"
                                dur="5000"
                                repeat="indefinite"
                                easing="linear"></a-animation>
                            
                            <!-- Electrons positioned on the orbit line -->
                            <a-sphere class="electron" color="#00ffaa" radius="0.1" position="0.8 0 0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                            <a-sphere class="electron" color="#00ffaa" radius="0.1" position="-0.8 0 0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                        </a-entity>
                        
                        <!-- Middle Orbit (2 electrons) - 2s² -->
                        <a-entity id="middle-orbit" position="0 0.5 0">
                            <a-animation attribute="rotation"
                                from="0 0 0"
                                to="0 360 0"
                                dur="8000"
                                repeat="indefinite"
                                easing="linear"></a-animation>
                            
                            <!-- Electrons positioned on the orbit line -->
                            <a-sphere class="electron" color="#00ffaa" radius="0.1" position="1.4 0 0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                            <a-sphere class="electron" color="#00ffaa" radius="0.1" position="-1.4 0 0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                        </a-entity>
                        
                        <!-- Outer Orbit (4 electrons) - 2p⁴ -->
                        <a-entity id="outer-orbit" position="0 0.5 0">
                            <a-animation attribute="rotation"
                                from="0 0 0"
                                to="0 360 0"
                                dur="12000"
                                repeat="indefinite"
                                easing="linear"></a-animation>
                            
                            <!-- Electrons positioned on the orbit line -->
                            <a-sphere class="electron" color="#d66efd" radius="0.1" position="2.0 0 0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                            <a-sphere class="electron" color="#d66efd" radius="0.1" position="-2.0 0 0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                            <a-sphere class="electron" color="#d66efd" radius="0.1" position="0 0 2.0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                            <a-sphere class="electron" color="#d66efd" radius="0.1" position="0 0 -2.0">
                                <a-text value="e⁻" color="white" align="center" position="0 0 0.11" scale="0.25 0.25 0.25"></a-text>
                            </a-sphere>
                        </a-entity>
                        
                        <!-- Atom label -->
                        <a-text value="Oxygen Atom" color="#00f7ff" align="center" position="0 2.5 0" scale="1.8 1.8 1.8"></a-text>
                    </a-entity>
                </a-marker>
                <a-entity camera></a-entity>
            </a-scene>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ... (your existing JavaScript remains unchanged) ...
            
            // Add orbit visibility toggle
            const orbitToggleBtn = document.createElement('button');
            orbitToggleBtn.className = 'control-btn';
            orbitToggleBtn.innerHTML = '<i class="fas fa-circle"></i>';
            orbitToggleBtn.title = 'Toggle orbit visibility';
            orbitToggleBtn.style.position = 'absolute';
            orbitToggleBtn.style.bottom = '30px';
            orbitToggleBtn.style.right = '20px';
            orbitToggleBtn.style.zIndex = '100';
            document.querySelector('.container').appendChild(orbitToggleBtn);
            
            let orbitsVisible = true;
            orbitToggleBtn.addEventListener('click', () => {
                orbitsVisible = !orbitsVisible;
                const orbitIds = ['orbit1', 'orbit2', 'orbit3'];
                orbitIds.forEach(id => {
                    const orbit = document.getElementById(id);
                    if (orbit) {
                        orbit.setAttribute('visible', orbitsVisible);
                    }
                });
                
                if (orbitsVisible) {
                    orbitToggleBtn.style.background = 'rgba(0, 40, 80, 0.7)';
                    orbitToggleBtn.style.borderColor = '#00f7ff';
                } else {
                    orbitToggleBtn.style.background = 'rgba(100, 40, 180, 0.7)';
                    orbitToggleBtn.style.borderColor = '#d66efd';
                }
            });
        });
    </script>
</body>
</html>
